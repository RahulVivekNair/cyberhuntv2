<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="utf-8">
  <title>Cyberhunt - Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <!-- Favicons -->
  <link rel="icon" href="/static/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
  <link rel="manifest" href="/static/site.webmanifest">

  <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="min-h-screen bg-base-200 font-sans flex items-center justify-center">

  <form id="loginForm" method="POST" action="/login" class="w-full max-w-sm">
    <fieldset class="fieldset bg-base-100 border-base-300 rounded-box border p-6 shadow-xl">
      <legend class="fieldset-legend text-xl font-bold text-primary">Cyberhunt Login</legend>

      <!-- Alert placeholder -->
      <div id="feedback" class="hidden mb-4"></div>

      <label for="name" class="label">Group Name</label>
      <input type="text" id="name" name="name" placeholder="Enter group name"
        class="input input-bordered input-primary w-full" required />

      <label for="password" class="label mt-2">Password</label>
      <input type="password" id="password" name="password" placeholder="Enter password"
        class="input input-bordered input-primary w-full" required />

      <button type="submit" class="btn btn-primary w-full mt-4">Login</button>
    </fieldset>
  </form>

  <script>
    const form = document.getElementById("loginForm");
    const feedback = document.getElementById("feedback");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(form);

      try {
        const res = await fetch("/login", { method: "POST", body: formData });

        if (res.ok) {
          window.location.href = "/game";
        } else {
          showFeedback("Invalid group name or password!", "error");
        }
      } catch {
        showFeedback("Login failed! Please try again.", "error");
      }
    });

    function showFeedback(message, type = "error") {
      // DaisyUI alert component
      feedback.className = `alert alert-${type} mb-4`;
      feedback.innerHTML = `<span>${message}</span>`;
      feedback.classList.remove("hidden");
    }
  </script>

</body>

</html>